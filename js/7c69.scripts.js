!function(a){function b(b,d,e){var f=this;return this.on("click.pjax",b,function(b){e=a.extend({},m(d,e)),e.container||(e.container=a(this).attr("data-pjax")||f),c(b,e)})}function c(b,c,d){d=m(c,d);var f,g=b.currentTarget,h=a(g);if(a.nodeName(g,"A"))f=g;else{if(f=h.attr("data-href"),!f)throw"$.fn.pjax or $.pjax.click requires an anchor element or an element with data-href attribute";f=l(f)}if(!(b.which>1||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||b.isDefaultPrevented()||location.protocol!==f.protocol||location.hostname!==f.hostname||f.hash&&f.href.replace(f.hash,"")===location.href.replace(location.hash,"")||f.href===location.href+"#")){var i={url:f.href,container:h.attr("data-pjax"),target:g,fragment:null},j=a.extend({},i,d),k=a.Event("pjax:click");h.trigger(k,[j]),k.isDefaultPrevented()||(e(j),b.preventDefault())}}function d(b,c,d){d=m(c,d);var f=b.currentTarget;if("FORM"!==f.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var g={type:f.method.toUpperCase(),url:f.action,data:a(f).serializeArray(),container:a(f).attr("data-pjax"),target:f,fragment:null};e(a.extend({},g,d)),b.preventDefault()}function e(b){function c(b,c){var d=a.Event(b,{relatedTarget:f});return i.trigger(d,c),!d.isDefaultPrevented()}b=a.extend(!0,{},a.ajaxSettings,e.defaults,b),a.isFunction(b.url)&&(b.url=b.url());var d,f=b.target,h=l(b.url).hash,i=b.context=n(b.container);b.data||(b.data={}),b.data._pjax=i.selector;var m;b.beforeSend=function(a,d){return"GET"!==d.type&&(d.timeout=0),a.setRequestHeader("X-PJAX",i.selector),a.setRequestHeader("X-PJAX-Container",i.selector),c("pjax:beforeSend",[a,d,b])?(d.timeout>0&&(m=setTimeout(function(){c("pjax:timeout",[a,b])&&a.abort("timeout")},d.timeout),d.timeout=0),b.requestUrl=l(d.url).href,void 0):!1},b.complete=function(e,f){m&&clearTimeout(m),b.request_time=a.now()-d,c("pjax:complete",[e,f,b]),c("pjax:end",[e,b])},b.error=function(a,d,e){var f=s("",a,b),h=c("pjax:error",[a,d,e,b]);h&&"GET"==b.type&&"abort"!==d&&g(f.url)},b.success=function(d,f,k){{var m=b.version;e.state}"function"==typeof m&&(m=m());var n=k.getResponseHeader("X-PJAX-Version"),o=s(d,k,b);if(m&&n&&m!==n)return g(o.url),void 0;if(!o.contents)return g(o.url),void 0;if(n&&!m&&(a.pjax.defaults.version=n),e.state={id:b.id||j(),url:o.url,title:o.title,meta:o.meta,container:i.selector,fragment:b.fragment,timeout:b.timeout},(b.push||b.replace)&&window.history.replaceState(e.state,o.title,o.url),o.title&&(document.title=o.title),r(o.meta),i.html(o.contents),t(o.scripts),"number"==typeof b.scrollTo&&a(window).scrollTop(b.scrollTo),""!==h){var p=l(o.url);p.hash=h,e.state.url=p.href,window.history.replaceState(e.state,o.title,p.href);var q=a(p.hash);q.length&&a(window).scrollTop(q.offset().top)}c("pjax:success",[d,f,k,b])},e.state||(e.state={id:j(),url:window.location.href,title:document.title,meta:q("head"),container:i.selector,fragment:b.fragment,timeout:b.timeout},window.history.replaceState(e.state,document.title));var o=e.xhr;o&&o.readyState<4&&(o.onreadystatechange=a.noop,o.abort()),e.options=b;var o=e.xhr=a.ajax(b);return o.readyState>0&&(b.push&&!b.replace&&(u(e.state.id,i.clone().contents()),window.history.pushState(null,"",k(b.requestUrl))),d=a.now(),c("pjax:start",[o,b]),c("pjax:send",[o,b])),e.xhr}function f(b,c){var d={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return e(a.extend(d,m(b,c)))}function g(a){window.history.replaceState(null,"","#"),window.location.replace(a)}function h(b){var c=b.state;if(c&&c.container){if(z&&A==c.url)return;var d=a(c.container);if(d.length){var f,h=C[c.id];e.state&&(f=e.state.id<c.id?"forward":"back",v(f,e.state.id,d.clone().contents()));var i=a.Event("pjax:popstate",{state:c,direction:f});d.trigger(i);var j={id:c.id,url:c.url,container:d,meta:c.meta,push:!1,fragment:c.fragment,timeout:c.timeout,scrollTo:!1};h?(d.trigger("pjax:start",[null,j]),c.title&&(document.title=c.title),d.html(h),r(c.meta),e.state=c,d.trigger("pjax:end",[null,j])):e(j),d[0].offsetHeight}else g(location.href)}z=!1}function i(b){var c=a.isFunction(b.url)?b.url():b.url,d=b.type?b.type.toUpperCase():"GET",e=a("<form>",{method:"GET"===d?"GET":"POST",action:c,style:"display:none"});"GET"!==d&&"POST"!==d&&e.append(a("<input>",{type:"hidden",name:"_method",value:d.toLowerCase()}));var f=b.data;if("string"==typeof f)a.each(f.split("&"),function(b,c){var d=c.split("=");e.append(a("<input>",{type:"hidden",name:d[0],value:d[1]}))});else if("object"==typeof f)for(key in f)e.append(a("<input>",{type:"hidden",name:key,value:f[key]}));a(document.body).append(e),e.submit()}function j(){return(new Date).getTime()}function k(a){return a.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function l(a){var b=document.createElement("a");return b.href=a,b}function m(b,c){return b&&c?c.container=b:c=a.isPlainObject(b)?b:{container:b},c.container&&(c.container=n(c.container)),c}function n(b){if(b=a(b),b.length){if(""!==b.selector&&b.context===document)return b;if(b.attr("id"))return a("#"+b.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+b.selector}function o(a,b){return a.filter(b).add(a.find(b))}function p(b){return a.parseHTML(b,document,!0)}function q(b){function c(b,c,d){return d in b?a.isArray(b[d])?b[d][b[d].length]=c:b[d]=[b[d],c]:b[d]=c,c}var d={},e={itemprop:"meta",property:"meta",name:"meta",rel:"link"},f={rel:"<stylesheet<prefetch<"};return a.each(e,function(e,g,h,i){h="link"==g?"href":"content",i=f[e],o(a(b),g+"["+e+"]").each(function(b,f,j){f=a(f),j=f.attr(e),(!i||i.indexOf(j)<0)&&c(d,g+">"+e+">"+j,f.attr(h))})}),d}function r(b,c){if(b){c||(c=a("head:first"));var d={},e=a([]);return a.each(b,function(b,c){a.each(a.isArray(c)?c:[c],function(a,c){a=d[c]||(d[c]=[]),a[a.length]=b})}),a.each(d,function(b,d){b=b.split(/>/);var f=b[0],g=b[1],h=b[2],i="link"==f?"href":"content",j=c.find(f+"["+g+'="'+h+'"]');a.each(d,function(b,c){d[b]=a("<"+f+" />").attr(g,h).attr(i,c).get(0)}),e=e.add(d),j.length?(j.last().after(d),j.remove()):c.append(d)}),c.find("meta.pjax,link.pjax").remove(),e.addClass("pjax"),e}}function s(b,c,d){var e,f,g,h,i={};if(i.url=k(c.getResponseHeader("X-PJAX-URL")||d.requestUrl),(e=/<html/i.test(b))?(f=a(p(b.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),g=a(p(b.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0])),h=f.add(g)):g=h=a(p(b)),0===g.length)return i;if(i.title=o(h,"title").last().text(),d.html=h,d.fragment||(d.fragment=c.getResponseHeader("X-PJAX-Container")),d.fragment){if("body"===d.fragment)var j=g;else var j=o(g,d.fragment).first();j.length&&(i.contents=j.contents(),i.title||(i.title=j.attr("title")||j.data("title")))}else i.contents=g;if(i.contents&&(i.contents=i.contents.not("title"),i.contents.find("title").remove(),i.scripts=o(i.contents,"script[src]").remove(),i.contents=i.contents.not(i.scripts)),f&&f.length){var l=q(f),m=o(f,"script").remove(),n=m.not("[src]");n&&n.length&&(m=m.not(n),i.contents=n.add(i.contents)),m&&m.length&&(i.scripts=m.add(i.scripts)),a.isEmptyObject(l)||(i.meta=l)}return i.title&&(i.title=a.trim(i.title)),i}function t(b){if(b){var c=a("script[src]");b.each(function(){var b=this.src,d=c.filter(function(){return this.src===b});if(!d.length){var e=document.createElement("script");e.type=a(this).attr("type"),e.src=a(this).attr("src"),document.head.appendChild(e)}})}}function u(a,b){for(C[a]=b,E.push(a);D.length;)delete C[D.shift()];for(;E.length>e.defaults.maxCacheLength;)delete C[E.shift()]}function v(a,b,c){var d,e;C[b]=c,"forward"===a?(d=E,e=D):(d=D,e=E),d.push(b),(b=e.pop())&&delete C[b]}function w(){return a("meta").filter(function(){var b=a(this).attr("http-equiv");return b&&"X-PJAX-VERSION"===b.toUpperCase()}).attr("content")}function x(){a.fn.pjax=b,a.pjax=e,a.pjax.enable=a.noop,a.pjax.disable=y,a.pjax.click=c,a.pjax.submit=d,a.pjax.reload=f,a.pjax.defaults={timeout:3e3,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:w},a(window).on("popstate.pjax",h)}function y(){a.fn.pjax=function(){return this},a.pjax=i,a.pjax.enable=x,a.pjax.disable=a.noop,a.pjax.click=a.noop,a.pjax.submit=a.noop,a.pjax.reload=function(){window.location.reload()},a(window).off("popstate.pjax",h)}var z=!0,A=window.location.href,B=window.history.state;B&&B.container&&(e.state=B),"state"in window.history&&(z=!1);var C={},D=[],E=[];a.inArray("state",a.event.props)<0&&a.event.props.push("state"),a.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),a.support.pjax?x():y()}(jQuery),function(a){"use strict";function b(){a(".main").fitVids()}if(b(),a.support.pjax){var c=400;a(document).pjax("a[data-pjax]",".main",{fragment:".main",duration:c}),a(".main").bind("pjax:send",function(){}).bind("pjax:beforeSend",function(){NProgress.start(),a(this).hide()}).bind("pjax:complete",function(){a(this).fadeIn(c),b(),NProgress.done()}).bind("pjax:success",function(){})}}(jQuery);